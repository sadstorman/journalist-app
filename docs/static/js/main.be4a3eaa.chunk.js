(this["webpackJsonpjournal--ap"]=this["webpackJsonpjournal--ap"]||[]).push([[0],{183:function(e,t,n){},184:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(40),c=n.n(r),s=n(0),i=n.n(s),o=n(1),u=n(14),l=n(35),d=n(15),j=n(30),b=n(17),p=n(20),m=n.n(p),O=n(27),f=n(52),h=n(71),x=n(76),v=Object(h.a)({apiKey:"AIzaSyC88nVwvOnUpHuFvCSHYNu3Yqdgk_OsRRM",authDomain:"sql-demo-ae1d6.firebaseapp.com",projectId:"sql-demo-ae1d6",storageBucket:"sql-demo-ae1d6.appspot.com",messagingSenderId:"744521824679",appId:"1:744521824679:web:7a75f39fcd1a2246671e82",measurementId:"G-Q1W9W63E2K"}),g=(Object(x.a)(v),Object(f.a)()),_=new O.a,y="[Auth] Login",w="[Auth] Logout",N="[UI] Set error",k="[UI] Remove error",C="[UI] Start loading",S="[UI] Finish loading",E="[Notes]  New note",I="[Notes]  Set active note",L="[Notes]  Load notes",D="[Notes]  Updated note saved",q="[Notes]  Delete note",P="[Notes]  Logout Cleaning",M=function(e){return{type:N,payload:e}},U=function(){return{type:S}},R=n(13),F=n(26),T=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https:////api.cloudinary.com/v1_1/yomismo123dg/upload",(n=new FormData).append("upload_preset","react-journal"),n.append("file",t),e.prev=4,e.next=7,fetch("https:////api.cloudinary.com/v1_1/yomismo123dg/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=15;break}return e.next=11,a.json();case 11:return r=e.sent,e.abrupt("return",r.secure_url);case 15:return e.next=17,a.json();case 17:throw e.sent;case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(4),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.e)(Object(F.g)(Object(F.b)(g,"".concat(t,"/journal/notes"))));case 2:return n=e.sent,a=[],n.forEach((function(e){a.push(Object(R.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e,t){return{type:I,payload:Object(R.a)({id:e},t)}},W=function(e,t){return{type:E,payload:Object(R.a)({id:e},t)}},Y=function(e){return function(){var t=Object(o.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e);case 2:a=t.sent,n(G(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},G=function(e){return{type:L,payload:e}},z=function(e){return function(){var t=Object(o.a)(i.a.mark((function t(n,a){var r,c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.uid,e.url||delete e.url,delete(c=Object(R.a)({},e)).id,s=Object(F.d)(g,"".concat(r,"/journal/notes/").concat(e.id)),t.next=7,Object(F.h)(s,c);case 7:n(H(e.id,e)),m.a.fire("Saved",e.title,"success");case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},H=function(e,t){return{type:D,payload:{id:e,note:t}}},J=function(e){return{type:q,payload:e}},K=function(e,t){return function(n){n({type:C});var a=Object(O.c)();Object(O.d)(a,e,t).then((function(e){var t=e.user;console.log(t),n(V(t.uid,t.displayName)),n(U())})).catch((function(e){console.log(e),n(U()),"Firebase: Error (auth/user-not-found)."===e.message?m.a.fire("Error","Invalid email, try again","error"):m.a.fire("Error","Wrong email/password, try again","error")}))}},V=function(e,t){return{type:y,payload:{uid:e,displayName:t}}},X=function(){return{type:w}},Q=n(4),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(u.a)(t,2),r=n[0],c=n[1],s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)},i=function(e){var t=e.target;c(Object(R.a)(Object(R.a)({},r),{},Object(Q.a)({},t.name,t.value)))};return[r,i,s]},$=n(43),ee=n.n($),te=n(6),ne=function(){var e=ee()().format("Do MMM YY"),t=Object(d.b)(),n=Object(d.c)((function(e){return e.notes})).active;return Object(te.jsx)("div",{className:"container-fluid",children:Object(te.jsxs)("div",{className:"row  notes__appbar",children:[Object(te.jsx)("div",{className:"col-md-6 col-sm-12 text-start",children:Object(te.jsx)("div",{children:Object(te.jsx)("span",{children:e})})}),Object(te.jsxs)("div",{className:"col-md-6 col-sm-12 text-end",children:[Object(te.jsx)("input",{id:"fileSelector",type:"file",name:"file",style:{display:"none"},onChange:function(e){var n=e.target.files[0];n&&(n.type.includes("image")?t(function(e){return function(){var t=Object(o.a)(i.a.mark((function t(n,a){var r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().notes.active,m.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){m.a.showLoading()}}),t.next=4,T(e);case 4:c=t.sent,r.url=c,n(z(r)),m.a.close();case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(n)):m.a.fire({icon:"error",title:"Oops...",text:"Subir solo imagenes"})),document.querySelector("#fileSelector").value=""}}),Object(te.jsxs)("div",{children:[Object(te.jsx)("button",{className:"btn",onClick:function(){document.querySelector("#fileSelector").click()},children:"Picture"}),Object(te.jsx)("button",{onClick:function(){t(z(n))},className:"btn",children:"Save"})]})]})]})})},ae=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.notes})).active,n=Z(t),r=Object(u.a)(n,3),c=r[0],s=r[1],l=r[2],j=c.body,b=c.title,p=Object(a.useRef)(t.id);Object(a.useEffect)((function(){t.id!==p.current&&(l(t),p.current=t.id)}),[t,l]),Object(a.useEffect)((function(){e(B(c.id,Object(R.a)({},c)))}),[c,e]);return Object(te.jsxs)("div",{className:"notes__main-content animate__animated animate__fadeIn animate__slower",children:[Object(te.jsx)(ne,{}),Object(te.jsxs)("div",{className:"notes__content",children:[Object(te.jsx)("input",{type:"text",placeholder:"some awesome title",className:"notes__title-input",autoComplete:"off",name:"title",value:b,onChange:s}),Object(te.jsx)("textarea",{placeholder:"Write about today!",className:"notes__textarea",name:"body",value:j,onChange:s}),t.url&&Object(te.jsx)("div",{className:"notes__image",children:Object(te.jsx)("img",{alt:"img4",src:t.url})})]}),Object(te.jsx)("button",{className:"btn btn-danger",onClick:function(){var t;e((t=p.current,function(){var e=Object(o.a)(i.a.mark((function e(n,a){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.a.fire({title:"Deleting...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){m.a.showLoading()}}),r=a().auth.uid,c=Object(F.d)(g,"".concat(r,"/journal/notes/").concat(t)),e.next=5,Object(F.c)(c);case 5:n(J(t)),m.a.close();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))},children:"Delete"})]})},re=function(){return Object(te.jsxs)("div",{className:"nothing__main-content",children:[Object(te.jsxs)("p",{children:["Select something",Object(te.jsx)("br",{}),"or create an entry!"]}),Object(te.jsx)("i",{className:"far fa-star fa-4x mt-5"})]})},ce=function(e){var t=e.id,n=e.date,a=e.title,r=e.body,c=e.url,s=Object(d.b)(),i=ee()(n);return Object(te.jsxs)("div",{onClick:function(){s(B(t,{date:n,title:a,body:r,url:c}))},className:"journal__entry pointer animate__animated animate__backInLeft",children:[c&&Object(te.jsx)("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(c,")")}}),Object(te.jsxs)("div",{className:"journal__entry-body",children:[Object(te.jsx)("p",{className:"journal__entry-title",children:a}),Object(te.jsx)("p",{className:"journal__entry-content",children:r})]}),Object(te.jsxs)("div",{className:"journal__entry-date-box",children:[Object(te.jsx)("span",{children:i.format("dddd")}),Object(te.jsxs)("h4",{children:[i.format("Do")," / ",i.format("MMM")]})]})]})},se=function(){var e=Object(d.c)((function(e){return e.notes.notes}));return Object(te.jsx)("div",{className:"jornal__entries",children:e.map((function(e){return Object(te.jsx)(ce,Object(R.a)({id:e.id},e),e.id)}))})},ie=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.name}));return Object(te.jsxs)("aside",{className:"journal__sidebar",children:[Object(te.jsxs)("div",{className:"journal__sidebar-navbar",children:[Object(te.jsxs)("h3",{className:"mt-5",children:[Object(te.jsx)("i",{className:"far fa-moon"}),Object(te.jsxs)("span",{children:[" ",t]})]}),Object(te.jsx)("button",{onClick:function(){e(function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.c)(),e.next=3,Object(O.f)(n);case 3:t(X),t({type:P});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:"btn",children:"Logout"})]}),Object(te.jsxs)("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().auth.uid,r={title:"",body:"",date:(new Date).getTime()},e.next=4,Object(F.a)(Object(F.b)(g,"".concat(a),"journal/notes"),r);case 4:c=e.sent,t(B(c.id,r)),t(W(c.id,r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},children:[Object(te.jsx)("i",{className:"far fa-calendar-plus fa-5x"}),Object(te.jsx)("p",{className:"mt-5",children:"New entry"})]}),Object(te.jsx)(se,{})]})},oe=function(){var e=Object(d.c)((function(e){return e.notes})).active;return Object(te.jsxs)("div",{className:"journal__main-content animate__animated animate__fadeIn animate__faster",children:[Object(te.jsx)(ie,{}),Object(te.jsx)("main",{children:e?Object(te.jsx)(ae,{}):Object(te.jsx)(re,{})})]})},ue=function(){var e=Object(d.c)((function(e){return e.ui.loading})),t=Object(d.b)(),n=Z({email:"",password:""}),a=Object(u.a)(n,2),r=a[0],c=a[1],s=r.email,i=r.password;return Object(te.jsxs)("div",{children:[Object(te.jsx)("h3",{className:"auth__title",children:"Login"}),Object(te.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(K(s,i))},className:"animate__animated animate__fadeIn animate__faster",children:[Object(te.jsx)("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"none",className:"auth__input",value:s,onChange:c}),Object(te.jsx)("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",value:i,onChange:c}),Object(te.jsx)("button",{className:"btn btn-primary btn-block",type:"submit",disabled:e,children:"Login"}),Object(te.jsxs)("div",{className:"auth__social-networks",children:[Object(te.jsx)("p",{children:"Login with social network"}),Object(te.jsxs)("div",{className:"google-btn",onClick:function(){t((function(e){var t=Object(O.c)();Object(O.e)(t,_).then((function(t){var n=t.user;e(V(n.uid,n.displayName))}))}))},children:[Object(te.jsx)("div",{className:"google-icon-wrapper",children:Object(te.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(te.jsx)("p",{className:"btn-text",children:Object(te.jsx)("b",{children:"Sign in with google"})})]})]}),Object(te.jsx)(j.b,{className:"link",to:"/auth/register",children:"Create new account"})]})]})},le=n(74),de=n.n(le),je=function(){var e=Object(d.b)(),t=Z({name:"",email:"",password:"",password2:""}),n=Object(u.a)(t,2),a=n[0],r=n[1],c=a.name,s=a.email,l=a.password,b=a.password2,p=function(){if(0===c.trim().length)return e(M("name required")),m.a.fire("error","Name required","error"),!1;if(de.a.isEmail(s)){if(l!==b||l.length<=6)return e(M("Password should match and have more than 6 characters")),m.a.fire("error","Password should match and have more than 6 characters","error"),!1}else e(M("email is required")),m.a.fire("error","Email is required","error");return e({type:k}),!0};return Object(te.jsxs)("div",{children:[Object(te.jsx)("h3",{className:"auth__title",children:"Register"}),Object(te.jsxs)("form",{onSubmit:function(t){t.preventDefault(),p()&&e(function(e,t,n){return function(a){var r=Object(O.c)();Object(O.b)(r,e,t,n).then(function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.user,e.next=3,Object(O.g)(r,{displayName:n});case 3:a(V(r.uid,r.displayName));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),m.a.fire("Error",e.message,"error")}))}}(s,l,c))},className:"animate__animated animate__fadeIn animate__faster",children:[Object(te.jsx)("input",{type:"text",placeholder:"Name",name:"name",value:c,onChange:r,autoComplete:"none",className:"auth__input"}),Object(te.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:s,onChange:r,autoComplete:"none",className:"auth__input"}),Object(te.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:l,onChange:r,className:"auth__input"}),Object(te.jsx)("input",{type:"password",placeholder:"Confirm password",name:"password2",value:b,onChange:r,className:"auth__input"}),Object(te.jsx)("button",{className:"btn btn-primary btn-block mb-5",type:"submit",children:"Register"}),Object(te.jsx)(j.b,{className:"link",to:"/auth/login",children:"Already registered? Log in"})]})]})},be=function(){return Object(te.jsx)("div",{className:"auth__main",children:Object(te.jsx)("div",{className:"auth__box-container",children:Object(te.jsxs)(b.d,{children:[Object(te.jsx)(b.b,{path:"/auth/login",component:ue}),Object(te.jsx)(b.b,{path:"/auth/register",component:je}),Object(te.jsx)(b.a,{to:"/auth/login"})]})})})},pe=function(){var e=Object(d.b)(),t=Object(a.useState)(!0),n=Object(u.a)(t,2),r=(n[0],n[1]),c=Object(a.useState)(!1),s=Object(u.a)(c,2),p=s[0],m=s[1];return Object(a.useEffect)((function(){var t=Object(l.c)();Object(l.d)(t,function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===n||void 0===n?void 0:n.uid)?(e(V(n.uid,n.displayName)),m(!0),e(Y(n.uid))):m(!1),setTimeout((function(){r(!1)}),2e3);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e,r,m]),Object(te.jsx)(j.a,{children:Object(te.jsx)("div",{children:Object(te.jsx)(b.d,{children:p?Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(b.b,{exact:!0,path:"/",component:oe}),Object(te.jsx)(b.a,{to:"/"})]}):Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(b.b,{path:"/auth",component:be}),Object(te.jsx)(b.a,{to:"/auth/login"})]})})})})},me=n(38),Oe=n(75),fe={loading:!1,msgError:null},he=n(18),xe={notes:[],active:null},ve="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||me.c,ge=Object(me.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{uid:t.payload.uid,name:t.payload.displayName};case w:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(R.a)(Object(R.a)({},e),{},{msgError:t.payload});case k:return Object(R.a)(Object(R.a)({},e),{},{msgError:null});case C:return Object(R.a)(Object(R.a)({},e),{},{loading:!0});case S:return Object(R.a)(Object(R.a)({},e),{},{loading:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(R.a)(Object(R.a)({},e),{},{active:Object(R.a)({},t.payload)});case E:return Object(R.a)(Object(R.a)({},e),{},{notes:[t.payload].concat(Object(he.a)(e.notes))});case L:return Object(R.a)(Object(R.a)({},e),{},{notes:Object(he.a)(t.payload)});case D:return Object(R.a)(Object(R.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case q:return console.log(t.payload),Object(R.a)(Object(R.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload}))});case P:return Object(R.a)(Object(R.a)({},e),{},{active:null,notes:[]});default:return e}}}),_e=Object(me.d)(ge,ve(Object(me.a)(Oe.a))),ye=function(){return Object(te.jsx)("div",{children:Object(te.jsx)(d.a,{store:_e,children:Object(te.jsx)(pe,{})})})};n(183);c.a.render(Object(te.jsx)(ye,{}),document.getElementById("root"))}},[[184,1,2]]]);
//# sourceMappingURL=main.be4a3eaa.chunk.js.map