(this["webpackJsonpjournal--ap"]=this["webpackJsonpjournal--ap"]||[]).push([[0],{183:function(e,t,n){},184:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(40),c=n.n(r),s=n(0),o=n.n(s),i=n(1),u=n(14),l=n(35),d=n(15),j=n(30),b=n(17),p=n(22),m=n.n(p),O=n(27),f=n(51),h=n(70),v=n(76),x=Object(h.a)({apiKey:"AIzaSyC88nVwvOnUpHuFvCSHYNu3Yqdgk_OsRRM",authDomain:"sql-demo-ae1d6.firebaseapp.com",projectId:"sql-demo-ae1d6",storageBucket:"sql-demo-ae1d6.appspot.com",messagingSenderId:"744521824679",appId:"1:744521824679:web:7a75f39fcd1a2246671e82",measurementId:"G-Q1W9W63E2K"}),_=(Object(v.a)(x),Object(f.a)()),g=new O.a,y="[Auth] Login",w="[Auth] Logout",N="[UI] Set error",k="[UI] Remove error",C="[UI] Start loading",S="[UI] Finish loading",E="[Notes]  New note",I="[Notes]  Set active note",L="[Notes]  Load notes",D="[Notes]  Updated note saved",q="[Notes]  Delete note",P="[Notes]  Logout Cleaning",U=function(e){return{type:N,payload:e}},R=function(){return{type:S}},F=n(13),A=n(26),M=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https:////api.cloudinary.com/v1_1/yomismo123dg/upload",(n=new FormData).append("upload_preset","react-journal"),n.append("file",t),e.prev=4,e.next=7,fetch("https:////api.cloudinary.com/v1_1/yomismo123dg/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=15;break}return e.next=11,a.json();case 11:return r=e.sent,e.abrupt("return",r.secure_url);case 15:return e.next=17,a.json();case 17:throw e.sent;case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(4),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.e)(Object(A.g)(Object(A.b)(_,"".concat(t,"/journal/notes"))));case 2:return n=e.sent,a=[],n.forEach((function(e){a.push(Object(F.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e,t){return{type:I,payload:Object(F.a)({id:e},t)}},W=function(e,t){return{type:E,payload:Object(F.a)({id:e},t)}},G=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e);case 2:a=t.sent,n(z(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},z=function(e){return{type:L,payload:e}},H=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n,a){var r,c,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.uid,e.url||delete e.url,delete(c=Object(F.a)({},e)).id,s=Object(A.d)(_,"".concat(r,"/journal/notes/").concat(e.id)),t.next=7,Object(A.h)(s,c);case 7:n(J(e.id,e)),m.a.fire("Saved",e.title,"success");case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},J=function(e,t){return{type:D,payload:{id:e,note:t}}},K=function(e){return{type:q,payload:e}},V=function(e,t){return function(n){n({type:C});var a=Object(O.c)();Object(O.d)(a,e,t).then((function(e){var t=e.user;console.log(t),n(X(t.uid,t.displayName)),n(R())})).catch((function(e){console.log(e),n(R()),"Firebase: Error (auth/user-not-found)."===e.message?m.a.fire("Error","Invalid email, try again","error"):m.a.fire("Error","Wrong email/password, try again","error")}))}},X=function(e,t){return{type:y,payload:{uid:e,displayName:t}}},Y=function(){return{type:w}},Q=n(4),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(u.a)(t,2),r=n[0],c=n[1],s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)},o=function(e){var t=e.target;c(Object(F.a)(Object(F.a)({},r),{},Object(Q.a)({},t.name,t.value)))};return[r,o,s]},$=n(6),ee=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.notes})).active;return Object($.jsxs)("div",{className:"notes__appbar",children:[Object($.jsx)("span",{children:"28 de Agosto 2021"}),Object($.jsx)("input",{id:"fileSelector",type:"file",name:"file",style:{display:"none"},onChange:function(t){var n=t.target.files[0];n&&e(function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n,a){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().notes.active,m.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){m.a.showLoading()}}),t.next=4,M(e);case 4:c=t.sent,r.url=c,n(H(r)),m.a.close();case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(n)),document.querySelector("#fileSelector").value=""}}),Object($.jsxs)("div",{children:[Object($.jsx)("button",{className:"btn",onClick:function(){document.querySelector("#fileSelector").click()},children:"Picture"}),Object($.jsx)("button",{onClick:function(){e(H(t))},className:"btn",children:"Save"})]})]})},te=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.notes})).active,n=Z(t),r=Object(u.a)(n,3),c=r[0],s=r[1],l=r[2],j=c.body,b=c.title,p=Object(a.useRef)(t.id);Object(a.useEffect)((function(){t.id!==p.current&&(l(t),p.current=t.id)}),[t,l]),Object(a.useEffect)((function(){e(B(c.id,Object(F.a)({},c)))}),[c,e]);return Object($.jsxs)("div",{className:"notes__main-content animate__animated animate__fadeIn animate__slower",children:[Object($.jsx)(ee,{}),Object($.jsxs)("div",{className:"notes__content",children:[Object($.jsx)("input",{type:"text",placeholder:"some awesome title",className:"notes__title-input",autoComplete:"off",name:"title",value:b,onChange:s}),Object($.jsx)("textarea",{placeholder:"Write about today!",className:"notes__textarea",name:"body",value:j,onChange:s}),t.url&&Object($.jsx)("div",{className:"notes__image",children:Object($.jsx)("img",{alt:"img4",src:t.url})})]}),Object($.jsx)("button",{className:"btn btn-danger",onClick:function(){var t;e((t=p.current,function(){var e=Object(i.a)(o.a.mark((function e(n,a){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.a.fire({title:"Deleting...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){m.a.showLoading()}}),r=a().auth.uid,c=Object(A.d)(_,"".concat(r,"/journal/notes/").concat(t)),e.next=5,Object(A.c)(c);case 5:n(K(t)),m.a.close();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))},children:"Delete"})]})},ne=function(){return Object($.jsxs)("div",{className:"nothing__main-content",children:[Object($.jsxs)("p",{children:["Select something",Object($.jsx)("br",{}),"or create an entry!"]}),Object($.jsx)("i",{className:"far fa-star fa-4x mt-5"})]})},ae=n(72),re=n.n(ae),ce=function(e){var t=e.id,n=e.date,a=e.title,r=e.body,c=e.url,s=Object(d.b)(),o=re()(n);return Object($.jsxs)("div",{onClick:function(){s(B(t,{date:n,title:a,body:r,url:c}))},className:"journal__entry pointer animate__animated animate__backInLeft",children:[c&&Object($.jsx)("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(c,")")}}),Object($.jsxs)("div",{className:"journal__entry-body",children:[Object($.jsx)("p",{className:"journal__entry-title",children:a}),Object($.jsx)("p",{className:"journal__entry-content",children:r})]}),Object($.jsxs)("div",{className:"journal__entry-date-box",children:[Object($.jsx)("span",{children:o.format("dddd")}),Object($.jsxs)("h4",{children:[o.format("Do")," / ",o.format("MMM")]})]})]})},se=function(){var e=Object(d.c)((function(e){return e.notes.notes}));return Object($.jsx)("div",{className:"jornal__entries",children:e.map((function(e){return Object($.jsx)(ce,Object(F.a)({id:e.id},e),e.id)}))})},oe=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.name}));return Object($.jsxs)("aside",{className:"journal__sidebar",children:[Object($.jsxs)("div",{className:"journal__sidebar-navbar",children:[Object($.jsxs)("h3",{className:"mt-5",children:[Object($.jsx)("i",{className:"far fa-moon"}),Object($.jsxs)("span",{children:[" ",t]})]}),Object($.jsx)("button",{onClick:function(){e(function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.c)(),e.next=3,Object(O.f)(n);case 3:t(Y),t({type:P});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:"btn",children:"Logout"})]}),Object($.jsxs)("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().auth.uid,r={title:"",body:"",date:(new Date).getTime()},e.next=4,Object(A.a)(Object(A.b)(_,"".concat(a),"journal/notes"),r);case 4:c=e.sent,t(B(c.id,r)),t(W(c.id,r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},children:[Object($.jsx)("i",{className:"far fa-calendar-plus fa-5x"}),Object($.jsx)("p",{className:"mt-5",children:"New entry"})]}),Object($.jsx)(se,{})]})},ie=function(){var e=Object(d.c)((function(e){return e.notes})).active;return Object($.jsxs)("div",{className:"journal__main-content animate__animated animate__fadeIn animate__faster",children:[Object($.jsx)(oe,{}),Object($.jsx)("main",{children:e?Object($.jsx)(te,{}):Object($.jsx)(ne,{})})]})},ue=function(){var e=Object(d.c)((function(e){return e.ui.loading})),t=Object(d.b)(),n=Z({email:"",password:""}),a=Object(u.a)(n,2),r=a[0],c=a[1],s=r.email,o=r.password;return Object($.jsxs)("div",{children:[Object($.jsx)("h3",{className:"auth__title",children:"Login"}),Object($.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(V(s,o))},className:"animate__animated animate__fadeIn animate__faster",children:[Object($.jsx)("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"none",className:"auth__input",value:s,onChange:c}),Object($.jsx)("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",value:o,onChange:c}),Object($.jsx)("button",{className:"btn btn-primary btn-block",type:"submit",disabled:e,children:"Login"}),Object($.jsxs)("div",{className:"auth__social-networks",children:[Object($.jsx)("p",{children:"Login with social network"}),Object($.jsxs)("div",{className:"google-btn",onClick:function(){t((function(e){var t=Object(O.c)();Object(O.e)(t,g).then((function(t){var n=t.user;e(X(n.uid,n.displayName))}))}))},children:[Object($.jsx)("div",{className:"google-icon-wrapper",children:Object($.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object($.jsx)("p",{className:"btn-text",children:Object($.jsx)("b",{children:"Sign in with google"})})]})]}),Object($.jsx)(j.b,{className:"link",to:"/auth/register",children:"Create new account"})]})]})},le=n(74),de=n.n(le),je=function(){var e=Object(d.b)(),t=Z({name:"",email:"",password:"",password2:""}),n=Object(u.a)(t,2),a=n[0],r=n[1],c=a.name,s=a.email,l=a.password,b=a.password2,p=function(){if(0===c.trim().length)return e(U("name required")),m.a.fire("error","Name required","error"),!1;if(de.a.isEmail(s)){if(l!==b||l.length<=6)return e(U("Password should match and have more than 6 characters")),m.a.fire("error","Password should match and have more than 6 characters","error"),!1}else e(U("email is required")),m.a.fire("error","Email is required","error");return e({type:k}),!0};return Object($.jsxs)("div",{children:[Object($.jsx)("h3",{className:"auth__title",children:"Register"}),Object($.jsxs)("form",{onSubmit:function(t){t.preventDefault(),p()&&e(function(e,t,n){return function(a){var r=Object(O.c)();Object(O.b)(r,e,t,n).then(function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.user,e.next=3,Object(O.g)(r,{displayName:n});case 3:a(X(r.uid,r.displayName));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),m.a.fire("Error",e.message,"error")}))}}(s,l,c))},className:"animate__animated animate__fadeIn animate__faster",children:[Object($.jsx)("input",{type:"text",placeholder:"Name",name:"name",value:c,onChange:r,autoComplete:"none",className:"auth__input"}),Object($.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:s,onChange:r,autoComplete:"none",className:"auth__input"}),Object($.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:l,onChange:r,className:"auth__input"}),Object($.jsx)("input",{type:"password",placeholder:"Confirm password",name:"password2",value:b,onChange:r,className:"auth__input"}),Object($.jsx)("button",{className:"btn btn-primary btn-block mb-5",type:"submit",children:"Register"}),Object($.jsx)(j.b,{className:"link",to:"/auth/login",children:"Already registered? Log in"})]})]})},be=function(){return Object($.jsx)("div",{className:"auth__main",children:Object($.jsx)("div",{className:"auth__box-container",children:Object($.jsxs)(b.d,{children:[Object($.jsx)(b.b,{path:"/auth/login",component:ue}),Object($.jsx)(b.b,{path:"/auth/register",component:je}),Object($.jsx)(b.a,{to:"/auth/login"})]})})})},pe=function(){var e=Object(d.b)(),t=Object(a.useState)(!0),n=Object(u.a)(t,2),r=(n[0],n[1]),c=Object(a.useState)(!1),s=Object(u.a)(c,2),p=s[0],m=s[1];return Object(a.useEffect)((function(){var t=Object(l.c)();Object(l.d)(t,function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===n||void 0===n?void 0:n.uid)?(e(X(n.uid,n.displayName)),m(!0),e(G(n.uid))):m(!1),setTimeout((function(){r(!1)}),2e3);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e,r,m]),Object($.jsx)(j.a,{children:Object($.jsx)("div",{children:Object($.jsx)(b.d,{children:p?Object($.jsxs)($.Fragment,{children:[Object($.jsx)(b.b,{exact:!0,path:"/",component:ie}),Object($.jsx)(b.a,{to:"/"})]}):Object($.jsxs)($.Fragment,{children:[Object($.jsx)(b.b,{path:"/auth",component:be}),Object($.jsx)(b.a,{to:"/auth/login"})]})})})})},me=n(38),Oe=n(75),fe={loading:!1,msgError:null},he=n(18),ve={notes:[],active:null},xe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||me.c,_e=Object(me.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{uid:t.payload.uid,name:t.payload.displayName};case w:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(F.a)(Object(F.a)({},e),{},{msgError:t.payload});case k:return Object(F.a)(Object(F.a)({},e),{},{msgError:null});case C:return Object(F.a)(Object(F.a)({},e),{},{loading:!0});case S:return Object(F.a)(Object(F.a)({},e),{},{loading:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(F.a)(Object(F.a)({},e),{},{active:Object(F.a)({},t.payload)});case E:return Object(F.a)(Object(F.a)({},e),{},{notes:[t.payload].concat(Object(he.a)(e.notes))});case L:return Object(F.a)(Object(F.a)({},e),{},{notes:Object(he.a)(t.payload)});case D:return Object(F.a)(Object(F.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case q:return console.log(t.payload),Object(F.a)(Object(F.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload}))});case P:return Object(F.a)(Object(F.a)({},e),{},{active:null,notes:[]});default:return e}}}),ge=Object(me.d)(_e,xe(Object(me.a)(Oe.a))),ye=function(){return Object($.jsx)("div",{children:Object($.jsx)(d.a,{store:ge,children:Object($.jsx)(pe,{})})})};n(183);c.a.render(Object($.jsx)(ye,{}),document.getElementById("root"))}},[[184,1,2]]]);
//# sourceMappingURL=main.8dceb6e5.chunk.js.map